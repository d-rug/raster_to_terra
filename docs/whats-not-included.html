<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 What’s not included | Raster to Terra</title>
  <meta name="description" content="5 What’s not included | Raster to Terra" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="5 What’s not included | Raster to Terra" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="d-rug/raster_to_terra" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 What’s not included | Raster to Terra" />
  
  
  

<meta name="author" content="Elise Hellwig" />


<meta name="date" content="2023-12-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="plotting.html"/>
<link rel="next" href="resources.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.1/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
</a></li>
<li><a href="https://d-rug.github.io/">
  <img src="https://github.com/d-rug/d-rug.github.io/raw/main/DRUG_final_cobalt.png" style="height: 100%; width: 100%; object-fit: contain" />
<li><a href="./" style="font-size: 18px">Raster to Terra</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#learning-goals"><i class="fa fa-check"></i>Learning Goals</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-we-will-cover"><i class="fa fa-check"></i>What we will cover</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#setup"><i class="fa fa-check"></i>Setup</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="the-basics.html"><a href="the-basics.html"><i class="fa fa-check"></i><b>1</b> The Basics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="the-basics.html"><a href="the-basics.html#a-birds-eye-view"><i class="fa fa-check"></i><b>1.1</b> A bird’s eye view</a></li>
<li class="chapter" data-level="1.2" data-path="the-basics.html"><a href="the-basics.html#classes"><i class="fa fa-check"></i><b>1.2</b> Classes</a></li>
<li class="chapter" data-level="1.3" data-path="the-basics.html"><a href="the-basics.html#reading-in-data"><i class="fa fa-check"></i><b>1.3</b> Reading in data</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="the-basics.html"><a href="the-basics.html#reading-speed-improvements"><i class="fa fa-check"></i><b>1.3.1</b> Reading Speed Improvements</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="the-basics.html"><a href="the-basics.html#writing-data"><i class="fa fa-check"></i><b>1.4</b> Writing data</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="the-basics.html"><a href="the-basics.html#writing-speed-improvements"><i class="fa fa-check"></i><b>1.4.1</b> Writing Speed Improvements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="working-with-data.html"><a href="working-with-data.html"><i class="fa fa-check"></i><b>2</b> Working with Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="working-with-data.html"><a href="working-with-data.html#renamed-methods"><i class="fa fa-check"></i><b>2.1</b> Renamed Methods</a></li>
<li class="chapter" data-level="2.2" data-path="working-with-data.html"><a href="working-with-data.html#combined-methods"><i class="fa fa-check"></i><b>2.2</b> Combined Methods</a></li>
<li class="chapter" data-level="2.3" data-path="working-with-data.html"><a href="working-with-data.html#speed-improvements"><i class="fa fa-check"></i><b>2.3</b> Speed Improvements</a></li>
<li class="chapter" data-level="2.4" data-path="working-with-data.html"><a href="working-with-data.html#spatial-relationships"><i class="fa fa-check"></i><b>2.4</b> Spatial Relationships</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="calculations.html"><a href="calculations.html"><i class="fa fa-check"></i><b>3</b> Calculations</a>
<ul>
<li class="chapter" data-level="3.1" data-path="calculations.html"><a href="calculations.html#raster-math"><i class="fa fa-check"></i><b>3.1</b> Raster Math</a></li>
<li class="chapter" data-level="3.2" data-path="calculations.html"><a href="calculations.html#spatial-calculations"><i class="fa fa-check"></i><b>3.2</b> Spatial Calculations</a></li>
<li class="chapter" data-level="3.3" data-path="calculations.html"><a href="calculations.html#local-app-functions"><i class="fa fa-check"></i><b>3.3</b> Local (*app) Functions</a></li>
<li class="chapter" data-level="3.4" data-path="calculations.html"><a href="calculations.html#applying-deep-dive"><i class="fa fa-check"></i><b>3.4</b> Applying Deep Dive</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>4</b> Plotting</a>
<ul>
<li class="chapter" data-level="4.1" data-path="plotting.html"><a href="plotting.html#static-plots"><i class="fa fa-check"></i><b>4.1</b> Static Plots</a></li>
<li class="chapter" data-level="4.2" data-path="plotting.html"><a href="plotting.html#interactive-plots"><i class="fa fa-check"></i><b>4.2</b> Interactive Plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="whats-not-included.html"><a href="whats-not-included.html"><i class="fa fa-check"></i><b>5</b> What’s not included</a>
<ul>
<li class="chapter" data-level="5.1" data-path="whats-not-included.html"><a href="whats-not-included.html#tidyverse-compatability"><i class="fa fa-check"></i><b>5.1</b> Tidyverse compatability</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="whats-not-included.html"><a href="whats-not-included.html#what-about-rasters"><i class="fa fa-check"></i><b>5.1.1</b> What about rasters?</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="whats-not-included.html"><a href="whats-not-included.html#spatial-dependency-and-regression"><i class="fa fa-check"></i><b>5.2</b> Spatial Dependency and Regression</a></li>
<li class="chapter" data-level="5.3" data-path="whats-not-included.html"><a href="whats-not-included.html#wheres-the-data-geodata"><i class="fa fa-check"></i><b>5.3</b> Where’s the data? geodata!</a></li>
<li class="chapter" data-level="5.4" data-path="whats-not-included.html"><a href="whats-not-included.html#so-about-c"><i class="fa fa-check"></i><b>5.4</b> So about C++…</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>6</b> Resources</a>
<ul>
<li class="chapter" data-level="6.1" data-path="resources.html"><a href="resources.html#practice"><i class="fa fa-check"></i><b>6.1</b> Practice!</a></li>
</ul></li>
<li class="divider"></li>
</a>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
  <img alt="CC BY-SA 4.0" src="https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg" style="float: right; padding-right: 10px;" />

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Raster to Terra</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="whats-not-included" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> What’s not included<a href="whats-not-included.html#whats-not-included" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>While terra has a very large amount of functionality, it doesn’t have
everything. This section covers functionality you will have to look elsewhere
for.</p>
<ul>
<li>tidyverse integration</li>
<li>spatial dependency and regression</li>
<li>data downloading</li>
<li>Native R classes</li>
</ul>
<div id="tidyverse-compatability" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Tidyverse compatability<a href="whats-not-included.html#tidyverse-compatability" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <a href="https://r-spatial.github.io/sf/articles/sf1.html">sf package</a> is the preeminent package for working with vector data
in R. It plays nicely with the tidyverse packages, and has built-in ggplot2
support. Sf supports wide to long spatial data transformations, something which
definitely has more applicability for vector data than raster raster data.</p>
<p>If you are tied to tidyverse syntax and plotting but also need terra speed,
there is a package called <a href="https://dieghernan.github.io/tidyterra/">tidyterra</a> which can provide some of that
functionality. Most notably tidyterra provides ggplot2 <code>geom</code> and <code>autoplot</code>
methods for both spatRasters and spatVectors. However, it may make more sense to
transition any spatVectors to simple features using the functions below if
you want tidyverse integration.</p>
<ul>
<li>terra to sf: <code>st_as_sf()</code></li>
<li>sf to terra: <code>vect()</code></li>
</ul>
<div id="what-about-rasters" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> What about rasters?<a href="whats-not-included.html#what-about-rasters" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The stars package provides tidyverse support for rasters. In general, it is not
as well documented and does not provide as much user guidance as terra.
Additionally, stars does not automatically handle data sets that are too large
to to be read into memory. You have to know that your data set is too big and
then make changes to your code detailed <a href="https://r-spatial.github.io/stars/articles/stars2.html">here</a>. It does have some
additional flexibility in terms of <a href="https://r-spatial.github.io/stars/index.html#raster-and-terra">data types and grid schema</a>, but
these seem more like edge cases than something to change packages over. Stars
also may be faster in some cases, but that depends on the task/function.
There is a comparison between the two paradigms <a href="https://r-spatial.github.io/stars/articles/stars6.html">here</a>, but
unfortunately it uses raster instead of terra so a lot of the method names are
wrong or missing.</p>
</div>
</div>
<div id="spatial-dependency-and-regression" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Spatial Dependency and Regression<a href="whats-not-included.html#spatial-dependency-and-regression" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The most commonly used packages for spatial dependency analysis and
spatial regression (spdep and spatialreg) both use simple features
objects (from sf). Thankfully the <code>st_as_sf()</code> function works very well
for transitioning from spatVectors to simple features, and if you are
only working with vector data you can probably forgo the
spatVectors altogether.</p>
</div>
<div id="wheres-the-data-geodata" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Where’s the data? geodata!<a href="whats-not-included.html#wheres-the-data-geodata" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Another one of raster’s more useful features was <code>getData()</code>, a function
that automated data downloading for a variety of online data sources.
Unfortunately, <code>getData()</code> was poorly documented, to the point where
using it required its own tutorial. In particular, because there was
only one function for all of the data sources, it was always a guessing
game as to which arguments were required for which data sources. It was
even difficult to find a list of data sources available. It was not
particularly well publicized either, to the point where people who used
raster for years, did not know it existed.</p>
<p>These problems have now been solved by migrating the functionality of <code>getData</code>
to its own package: <a href="https://github.com/rspatial/geodata">geodata</a>. Every data source (listed below) has
one or more functions, each of which is well documented.</p>
<p>One notable change is that you must specify where the data should be downloaded.
This can be done either in the function call itself or for a given R session
using the function <code>geodata_path</code>.</p>
<ul>
<li>Marine data from <a href="https://bio-oracle.org/">Bio-ORACLE</a></li>
<li>Current and future climate data from <a href="https://worldclim.org/">WorldClim</a></li>
<li>Political boundaries and adminstrative data from <a href="https://gadm.org/">GADM</a></li>
<li>Elevation data from <a href="https://srtm.csi.cgiar.org/">SRTM</a> and <a href="https://serc.carleton.edu/resources/16409.html">GTOP30</a> at high latitudes</li>
<li>Crop distribution and yield data from <a href="http://www.earthstat.org/harvested-area-yield-175-crops/">Monfreda et al. 2008</a>,
<a href="https://www.mapspam.info/data/">SPAM</a>, <a href="https://esa-worldcover.org/en">ESA Worldcover</a>, <a href="https://glad.umd.edu/dataset/croplands">GLAD</a>, and <a href="https://about.maps.qed.ai/">QED</a>
(for Africa)</li>
<li>Crop calendars from <a href="https://sage.nelson.wisc.edu/data-and-models/datasets/crop-calendar-dataset/">Sacks et al. 2010</a></li>
<li>Landcover data from <a href="https://esa-worldcover.org/en">ESA Worldcover</a></li>
<li>Last of the Wild Human Footprint map from NASA’s <a href="https://sedac.ciesin.columbia.edu/data/collection/wildareas-v3">Socioeconomic Data and
Applications Center</a> (SEDAC)</li>
<li><a href="https://www.openstreetmap.org">Open Street Map</a></li>
<li>Human Population density from <a href="https://sedac.ciesin.columbia.edu/data/collection/gpw-v4/documentation">SEDAC</a></li>
<li>Soils data from <a href="https://www.isric.org/explore/soilgrids">ISRIC</a>, <a href="https://envirometrix.nl/isdasoil-open-soil-data-for-africa/">iSDA</a></li>
<li>Species occurrence data from the
<a href="https://www.gbif.org/">Global Biodiversity Information Facility</a></li>
<li>Travel times to cities and ports from <a href="https://www.nature.com/articles/s41597-019-0265-5">Nelson et al. 2019</a></li>
</ul>
</div>
<div id="so-about-c" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> So about C++…<a href="whats-not-included.html#so-about-c" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As mentioned previously, spatRasters, spatVectors, and spatExtents
(spat* objects) are all implemented in C++ instead of directly in R.
This greatly improves processing speeds, as demonstrated above, but it
does come with some costs. For most people, the only change will be that
you can no longer recover spat* objects in from your workspace .RData
files. This problem is easily solved by writing the data to a disk using
<code>writeRaster</code>, which is considered best practices anyway.</p>
<p>The other issue is only relevant to people who use computing clusters. Because
of the way terra classes are implemented (using a C++ pointer), they cannot be
passed directly to a computing cluster. They first need to be packaged up using
the <code>wrap</code> function (documented <a href="https://rspatial.github.io/terra/reference/wrap.html">here</a>) which creates a <code>Packed*</code>
version of the class. This can be transferred to the cluster and then converted
back using <code>unwrap</code>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="plotting.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="resources.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/d-rug/raster-to-terra/edit/main/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/d-rug/raster-to-terra/blob/main/index.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
