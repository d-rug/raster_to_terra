<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Raster to Terra</title>
  <meta name="description" content="Raster to Terra" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Raster to Terra" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="d-rug/raster_to_terra" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Raster to Terra" />
  
  
  

<meta name="author" content="Elise Hellwig" />


<meta name="date" content="2024-03-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="the-basics.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.1/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
</a></li>
<li><a href="https://d-rug.github.io/">
  <img src="https://github.com/d-rug/d-rug.github.io/raw/main/DRUG_final_cobalt.png" style="height: 100%; width: 100%; object-fit: contain" />
<li><a href="./" style="font-size: 18px">Raster to Terra</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i>Learning Objectives</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-we-will-cover"><i class="fa fa-check"></i>What we will cover</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#setup"><i class="fa fa-check"></i>Setup</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="the-basics.html"><a href="the-basics.html"><i class="fa fa-check"></i><b>1</b> The Basics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="the-basics.html"><a href="the-basics.html#a-birds-eye-view"><i class="fa fa-check"></i><b>1.1</b> A bird’s eye view</a></li>
<li class="chapter" data-level="1.2" data-path="the-basics.html"><a href="the-basics.html#classes"><i class="fa fa-check"></i><b>1.2</b> Classes</a></li>
<li class="chapter" data-level="1.3" data-path="the-basics.html"><a href="the-basics.html#reading-in-data"><i class="fa fa-check"></i><b>1.3</b> Reading in data</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="the-basics.html"><a href="the-basics.html#reading-speed-improvements"><i class="fa fa-check"></i><b>1.3.1</b> Reading Speed Improvements</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="the-basics.html"><a href="the-basics.html#writing-data"><i class="fa fa-check"></i><b>1.4</b> Writing data</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="the-basics.html"><a href="the-basics.html#writing-speed-improvements"><i class="fa fa-check"></i><b>1.4.1</b> Writing Speed Improvements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="working-with-data.html"><a href="working-with-data.html"><i class="fa fa-check"></i><b>2</b> Working with Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="working-with-data.html"><a href="working-with-data.html#renamed-methods"><i class="fa fa-check"></i><b>2.1</b> Renamed Methods</a></li>
<li class="chapter" data-level="2.2" data-path="working-with-data.html"><a href="working-with-data.html#combined-methods"><i class="fa fa-check"></i><b>2.2</b> Combined Methods</a></li>
<li class="chapter" data-level="2.3" data-path="working-with-data.html"><a href="working-with-data.html#speed-improvements"><i class="fa fa-check"></i><b>2.3</b> Speed Improvements</a></li>
<li class="chapter" data-level="2.4" data-path="working-with-data.html"><a href="working-with-data.html#spatial-relationships"><i class="fa fa-check"></i><b>2.4</b> Spatial Relationships</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="calculations.html"><a href="calculations.html"><i class="fa fa-check"></i><b>3</b> Calculations</a>
<ul>
<li class="chapter" data-level="3.1" data-path="calculations.html"><a href="calculations.html#raster-math"><i class="fa fa-check"></i><b>3.1</b> Raster Math</a></li>
<li class="chapter" data-level="3.2" data-path="calculations.html"><a href="calculations.html#spatial-calculations"><i class="fa fa-check"></i><b>3.2</b> Spatial Calculations</a></li>
<li class="chapter" data-level="3.3" data-path="calculations.html"><a href="calculations.html#local-app-functions"><i class="fa fa-check"></i><b>3.3</b> Local (*app) Functions</a></li>
<li class="chapter" data-level="3.4" data-path="calculations.html"><a href="calculations.html#applying-deep-dive"><i class="fa fa-check"></i><b>3.4</b> Applying Deep Dive</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>4</b> Plotting</a>
<ul>
<li class="chapter" data-level="4.1" data-path="plotting.html"><a href="plotting.html#static-plots"><i class="fa fa-check"></i><b>4.1</b> Static Plots</a></li>
<li class="chapter" data-level="4.2" data-path="plotting.html"><a href="plotting.html#interactive-plots"><i class="fa fa-check"></i><b>4.2</b> Interactive Plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="whats-not-included.html"><a href="whats-not-included.html"><i class="fa fa-check"></i><b>5</b> What’s not included</a>
<ul>
<li class="chapter" data-level="5.1" data-path="whats-not-included.html"><a href="whats-not-included.html#tidyverse-compatability"><i class="fa fa-check"></i><b>5.1</b> Tidyverse compatability</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="whats-not-included.html"><a href="whats-not-included.html#what-about-rasters"><i class="fa fa-check"></i><b>5.1.1</b> What about rasters?</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="whats-not-included.html"><a href="whats-not-included.html#spatial-dependency-and-regression"><i class="fa fa-check"></i><b>5.2</b> Spatial Dependency and Regression</a></li>
<li class="chapter" data-level="5.3" data-path="whats-not-included.html"><a href="whats-not-included.html#wheres-the-data-geodata"><i class="fa fa-check"></i><b>5.3</b> Where’s the data? geodata!</a></li>
<li class="chapter" data-level="5.4" data-path="whats-not-included.html"><a href="whats-not-included.html#so-about-c"><i class="fa fa-check"></i><b>5.4</b> So about C++…</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>6</b> Resources</a>
<ul>
<li class="chapter" data-level="6.1" data-path="resources.html"><a href="resources.html#practice"><i class="fa fa-check"></i><b>6.1</b> Practice!</a></li>
</ul></li>
<li class="divider"></li>
</a>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
  <img alt="CC BY-SA 4.0" src="https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg" style="float: right; padding-right: 10px;" />

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Raster to Terra</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Raster to Terra</h1>
<p class="author"><em>Elise Hellwig</em></p>
<p class="date"><em>2024-03-15</em></p>
</div>
<div id="overview" class="section level1 unnumbered hasAnchor">
<h1>Overview<a href="index.html#overview" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The first generation of r spatial packages (raster, sp, rgdal, rgeos) have gone
the way of the dodo, and the second-generation packages (terra, sf, and stars)
are here to stay. If you haven’t made the transition from raster to terra, now
is the time. And the good news is, it’s probably easier than you think. This
compares the two packages, provides direct function and syntax
translations, and links to many resources to answer any further questions you
might have.</p>
<p>Additionally, because both raster an terra are so large, this reader focuses on
things that have changed between raster and terra. If you don’t see something
mentioned here, that doesn’t mean it doesn’t exist in terra. It probably just
didn’t change between the two packages.</p>
<div id="learning-objectives" class="section level2 unnumbered hasAnchor">
<h2>Learning Objectives<a href="index.html#learning-objectives" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Get a sense for the functionality of the terra package as a whole</li>
<li>Be able to translate existing code from deprecated packages to terra
syntax</li>
<li>Know where to find more information about terra.</li>
</ul>
<p><strong>This reader will NOT give you a comprehensive tour of terra.</strong></p>
<p>It is too short for that. However, it will provide links to places you can find
more documentation.</p>
</div>
<div id="prerequisites" class="section level2 unnumbered hasAnchor">
<h2>Prerequisites<a href="index.html#prerequisites" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Familiarity with the raster and sp packages</li>
</ul>
</div>
<div id="what-we-will-cover" class="section level2 unnumbered hasAnchor">
<h2>What we will cover<a href="index.html#what-we-will-cover" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Package overview</li>
<li>New classes and object creation</li>
<li>Method name changes</li>
<li>Spatial relationships</li>
<li>Calculations</li>
<li>Plotting</li>
<li>What’s not in terra</li>
</ul>
</div>
<div id="setup" class="section level2 unnumbered hasAnchor">
<h2>Setup<a href="index.html#setup" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="index.html#cb1-1" tabindex="-1"></a><span class="fu">library</span>(microbenchmark) <span class="co"># for speed testing</span></span>
<span id="cb1-2"><a href="index.html#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="index.html#cb1-3" tabindex="-1"></a><span class="co">#new packages</span></span>
<span id="cb1-4"><a href="index.html#cb1-4" tabindex="-1"></a><span class="fu">library</span>(terra) </span>
<span id="cb1-5"><a href="index.html#cb1-5" tabindex="-1"></a><span class="fu">library</span>(geodata)</span>
<span id="cb1-6"><a href="index.html#cb1-6" tabindex="-1"></a><span class="fu">library</span>(tidyterra)</span>
<span id="cb1-7"><a href="index.html#cb1-7" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-8"><a href="index.html#cb1-8" tabindex="-1"></a></span>
<span id="cb1-9"><a href="index.html#cb1-9" tabindex="-1"></a><span class="co">#old packages</span></span>
<span id="cb1-10"><a href="index.html#cb1-10" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb1-11"><a href="index.html#cb1-11" tabindex="-1"></a><span class="fu">library</span>(rgdal)</span>
<span id="cb1-12"><a href="index.html#cb1-12" tabindex="-1"></a></span>
<span id="cb1-13"><a href="index.html#cb1-13" tabindex="-1"></a><span class="co">#formatting</span></span>
<span id="cb1-14"><a href="index.html#cb1-14" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-15"><a href="index.html#cb1-15" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-16"><a href="index.html#cb1-16" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-17"><a href="index.html#cb1-17" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb1-18"><a href="index.html#cb1-18" tabindex="-1"></a></span>
<span id="cb1-19"><a href="index.html#cb1-19" tabindex="-1"></a>temp_pal <span class="ot">=</span> <span class="fu">colorRampPalette</span>(<span class="fu">brewer.pal</span>(<span class="dv">9</span>, <span class="st">&#39;YlOrRd&#39;</span>))(<span class="dv">50</span>)</span>
<span id="cb1-20"><a href="index.html#cb1-20" tabindex="-1"></a>precip_pal <span class="ot">=</span> <span class="fu">colorRampPalette</span>(<span class="fu">brewer.pal</span>(<span class="dv">9</span>, <span class="st">&#39;Blues&#39;</span>))(<span class="dv">50</span>)</span>
<span id="cb1-21"><a href="index.html#cb1-21" tabindex="-1"></a></span>
<span id="cb1-22"><a href="index.html#cb1-22" tabindex="-1"></a><span class="fu">geodata_path</span>(<span class="st">&#39;data/&#39;</span>)</span>
<span id="cb1-23"><a href="index.html#cb1-23" tabindex="-1"></a></span>
<span id="cb1-24"><a href="index.html#cb1-24" tabindex="-1"></a>cv <span class="ot">=</span> <span class="cf">function</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="fu">sd</span>(x, <span class="at">na.rm=</span>na.rm)<span class="sc">/</span><span class="fu">mean</span>(x, <span class="at">na.rm=</span>na.rm)</span>
<span id="cb1-25"><a href="index.html#cb1-25" tabindex="-1"></a></span>
<span id="cb1-26"><a href="index.html#cb1-26" tabindex="-1"></a><span class="fu">options</span>(<span class="at">warn=</span><span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb1-27"><a href="index.html#cb1-27" tabindex="-1"></a></span>
<span id="cb1-28"><a href="index.html#cb1-28" tabindex="-1"></a>elev_fn <span class="ot">=</span> <span class="fu">system.file</span>(<span class="st">&quot;ex/elev.tif&quot;</span>, <span class="at">package=</span><span class="st">&quot;terra&quot;</span>)</span>
<span id="cb1-29"><a href="index.html#cb1-29" tabindex="-1"></a>lux_fn <span class="ot">=</span> <span class="fu">system.file</span>(<span class="st">&quot;ex/lux.shp&quot;</span>, <span class="at">package=</span><span class="st">&quot;terra&quot;</span>)</span>
<span id="cb1-30"><a href="index.html#cb1-30" tabindex="-1"></a></span>
<span id="cb1-31"><a href="index.html#cb1-31" tabindex="-1"></a>elev <span class="ot">=</span> <span class="fu">rast</span>(elev_fn)</span>
<span id="cb1-32"><a href="index.html#cb1-32" tabindex="-1"></a>r_elev <span class="ot">=</span> <span class="fu">raster</span>(elev)</span>
<span id="cb1-33"><a href="index.html#cb1-33" tabindex="-1"></a></span>
<span id="cb1-34"><a href="index.html#cb1-34" tabindex="-1"></a>lux <span class="ot">=</span> <span class="fu">vect</span>(lux_fn)</span>
<span id="cb1-35"><a href="index.html#cb1-35" tabindex="-1"></a>sp_lux <span class="ot">=</span> <span class="fu">shapefile</span>(lux_fn)</span>
<span id="cb1-36"><a href="index.html#cb1-36" tabindex="-1"></a></span>
<span id="cb1-37"><a href="index.html#cb1-37" tabindex="-1"></a>temp <span class="ot">=</span> <span class="fu">worldclim_country</span>(<span class="at">country=</span><span class="st">&#39;LUX&#39;</span>, <span class="at">var=</span><span class="st">&#39;tavg&#39;</span>)</span>
<span id="cb1-38"><a href="index.html#cb1-38" tabindex="-1"></a>precip <span class="ot">=</span> <span class="fu">worldclim_country</span>(<span class="at">country=</span><span class="st">&#39;LUX&#39;</span>, <span class="at">var=</span><span class="st">&#39;prec&#39;</span>)</span>
<span id="cb1-39"><a href="index.html#cb1-39" tabindex="-1"></a></span>
<span id="cb1-40"><a href="index.html#cb1-40" tabindex="-1"></a><span class="fu">names</span>(temp) <span class="ot">=</span> month.name</span>
<span id="cb1-41"><a href="index.html#cb1-41" tabindex="-1"></a><span class="fu">names</span>(precip) <span class="ot">=</span> month.name</span></code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="the-basics.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/d-rug/raster-to-terra/edit/main/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/d-rug/raster-to-terra/blob/main/index.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
