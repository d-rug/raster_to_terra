<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Working with Data | Raster to Terra</title>
  <meta name="description" content="3 Working with Data | Raster to Terra" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Working with Data | Raster to Terra" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="d-rug/raster_to_terra" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Working with Data | Raster to Terra" />
  
  
  

<meta name="author" content="Elise Hellwig" />


<meta name="date" content="2023-12-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="the-basics.html"/>
<link rel="next" href="calculations.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://d-rug.github.io/">
  <img src="https://github.com/d-rug/d-rug.github.io/raw/main/DRUG_final_cobalt.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">Raster to Terra</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#learning-goals"><i class="fa fa-check"></i><b>0.1</b> Learning Goals</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>0.2</b> Prerequisites</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#what-we-will-cover"><i class="fa fa-check"></i><b>0.3</b> What we will cover</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="terra-a-birds-eye-view.html"><a href="terra-a-birds-eye-view.html"><i class="fa fa-check"></i><b>1</b> <code>terra</code>: a bird’s eye view</a>
<ul>
<li class="chapter" data-level="1.1" data-path="terra-a-birds-eye-view.html"><a href="terra-a-birds-eye-view.html#setup"><i class="fa fa-check"></i><b>1.1</b> Setup</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="the-basics.html"><a href="the-basics.html"><i class="fa fa-check"></i><b>2</b> The Basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="the-basics.html"><a href="the-basics.html#classes"><i class="fa fa-check"></i><b>2.1</b> Classes</a></li>
<li class="chapter" data-level="2.2" data-path="the-basics.html"><a href="the-basics.html#reading-in-data"><i class="fa fa-check"></i><b>2.2</b> Reading in data</a></li>
<li class="chapter" data-level="2.3" data-path="the-basics.html"><a href="the-basics.html#writing-data"><i class="fa fa-check"></i><b>2.3</b> Writing data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="working-with-data.html"><a href="working-with-data.html"><i class="fa fa-check"></i><b>3</b> Working with Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="working-with-data.html"><a href="working-with-data.html#speed-improvements"><i class="fa fa-check"></i><b>3.1</b> Speed Improvements</a></li>
<li class="chapter" data-level="3.2" data-path="working-with-data.html"><a href="working-with-data.html#spatial-relationships"><i class="fa fa-check"></i><b>3.2</b> Spatial Relationships</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="calculations.html"><a href="calculations.html"><i class="fa fa-check"></i><b>4</b> Calculations</a></li>
<li class="chapter" data-level="5" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>5</b> Plotting</a></li>
<li class="chapter" data-level="6" data-path="wheres-the-data-geodata.html"><a href="wheres-the-data-geodata.html"><i class="fa fa-check"></i><b>6</b> Where’s the data? <code>geodata</code>!</a></li>
<li class="chapter" data-level="7" data-path="what-about-sf-and-stars.html"><a href="what-about-sf-and-stars.html"><i class="fa fa-check"></i><b>7</b> What about sf (and stars)?</a></li>
<li class="chapter" data-level="8" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>8</b> Resources</a>
<ul>
<li class="chapter" data-level="8.1" data-path="resources.html"><a href="resources.html#practice"><i class="fa fa-check"></i><b>8.1</b> Practice!</a></li>
</ul></li>
<li class="divider"></li>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
  <img alt="CC BY-SA 4.0" src="https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg" style="float: right; padding-right: 10px;" />
</a>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Raster to Terra</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working-with-data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Working with Data<a href="working-with-data.html#working-with-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In general, method names got shorter and more similar to base R. Additionally,
most capitals were removed.</p>
<ul>
<li><p><code>coordinates</code> <span class="math inline">\(\rightarrow\)</span> <code>crds</code></p></li>
<li><p><code>nlayers</code> <span class="math inline">\(\rightarrow\)</span> <code>nlyr</code></p></li>
<li><p><code>getValues</code> <span class="math inline">\(\rightarrow\)</span> <code>values</code></p></li>
<li><p><code>stack</code>, <code>addLayer</code> <span class="math inline">\(\rightarrow\)</span> <code>c</code></p></li>
<li><p><code>unstack</code> <span class="math inline">\(\rightarrow\)</span> <code>as.list</code></p></li>
<li><p><code>dropLayer</code> <span class="math inline">\(\rightarrow\)</span> <code>subset</code></p></li>
<li><p><code>rasterTo*</code> <span class="math inline">\(\rightarrow\)</span> <code>as.*</code></p></li>
<li><p><code>isLonLat</code> <span class="math inline">\(\rightarrow\)</span> <code>is.lonlat</code></p></li>
<li><p><code>bind</code> <span class="math inline">\(\rightarrow\)</span> <code>rbind</code></p></li>
</ul>
<p>Additionally, many tasks that previously at separate methods for raster and
vector data, are now combined into one method. Functions in green rows have been
renamed, while functions in grey rows, maintain their name from raster.</p>
<table class="table table-striped" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Operation
</th>
<th style="text-align:left;">
Old Methods
</th>
<th style="text-align:left;">
New Method
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;background-color: #c6eec3 !important;">
reproject
</td>
<td style="text-align:left;background-color: #c6eec3 !important;">
projectRaster, sp::spTransform
</td>
<td style="text-align:left;background-color: #c6eec3 !important;">
project
</td>
</tr>
<tr>
<td style="text-align:left;">
combine cells/polygons
</td>
<td style="text-align:left;">
aggregate
</td>
<td style="text-align:left;">
aggregate
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #c6eec3 !important;">
split cells/polygons
</td>
<td style="text-align:left;background-color: #c6eec3 !important;">
disaggregate
</td>
<td style="text-align:left;background-color: #c6eec3 !important;">
disagg
</td>
</tr>
<tr>
<td style="text-align:left;">
spatial query
</td>
<td style="text-align:left;">
sp::over
</td>
<td style="text-align:left;">
extract
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #c6eec3 !important;">
spatial sampling
</td>
<td style="text-align:left;background-color: #c6eec3 !important;">
sp::spsample, sampleRandom
</td>
<td style="text-align:left;background-color: #c6eec3 !important;">
spatSample
</td>
</tr>
</tbody>
</table>
<div id="speed-improvements" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Speed Improvements<a href="working-with-data.html#speed-improvements" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Many of the most time-intensive operations got speed boosts from the C++
implementation.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
function
</th>
<th style="text-align:right;">
median (millisec)
</th>
<th style="text-align:right;">
n_eval
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
terra::spatSample
</td>
<td style="text-align:right;">
2.20
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #dcdcdc !important;">
raster::sampleRandom
</td>
<td style="text-align:right;background-color: #dcdcdc !important;">
6.83
</td>
<td style="text-align:right;background-color: #dcdcdc !important;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
terra::project
</td>
<td style="text-align:right;">
35.05
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #dcdcdc !important;">
raster::projectRaster
</td>
<td style="text-align:right;background-color: #dcdcdc !important;">
60.85
</td>
<td style="text-align:right;background-color: #dcdcdc !important;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
terra::resample
</td>
<td style="text-align:right;">
1.83
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #dcdcdc !important;">
raster::resample
</td>
<td style="text-align:right;background-color: #dcdcdc !important;">
49.53
</td>
<td style="text-align:right;background-color: #dcdcdc !important;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
terra::rasterize
</td>
<td style="text-align:right;">
1.83
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #dcdcdc !important;">
raster::rasterize
</td>
<td style="text-align:right;background-color: #dcdcdc !important;">
233.25
</td>
<td style="text-align:right;background-color: #dcdcdc !important;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
terra::as.polygons
</td>
<td style="text-align:right;">
27.97
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;background-color: #dcdcdc !important;">
raster::rasterToPolygons
</td>
<td style="text-align:right;background-color: #dcdcdc !important;">
187.75
</td>
<td style="text-align:right;background-color: #dcdcdc !important;">
10
</td>
</tr>
</tbody>
</table>
</div>
<div id="spatial-relationships" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Spatial Relationships<a href="working-with-data.html#spatial-relationships" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Instead of having the name of the spatial relation function depend on the type of spatial
relationship, in terra, the number of objects compared determines the function
used. For one-to-one and one-to-many comparisons use <code>is.related()</code>, for
many-to-many comparisons, use <code>relate()</code>. The <code>relation</code> argument specifies
relationship type. Options include intersects, touches, crosses, overlaps, within,
contains, covers, covered by, disjoint, or <a href="https://en.wikipedia.org/wiki/DE-9IM">DE-9IM string</a></p>
<p>The spatial operations below remain unchanged:</p>
<ul>
<li><code>union()</code></li>
<li><code>intersect()</code></li>
<li><code>symdif()</code></li>
<li><code>buffer()</code></li>
<li><code>crop()</code></li>
<li><code>cover()</code></li>
</ul>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="calculations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/d-rug/raster-to-terra/edit/main/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/d-rug/raster-to-terra/blob/main/index.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
